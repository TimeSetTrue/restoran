(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,a){},29:function(e,t,a){e.exports=a.p+"static/media/shopping-cart-solid.701d6d1d.svg"},30:function(e,t,a){e.exports=a.p+"static/media/food-bg.698e5e80.jpg"},33:function(e,t,a){e.exports=a(49)},38:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),i=a.n(c),u=a(10),s=a(11),l=a(14),o=a(12),m=a(15),p=(a(38),a(13)),d=function(e){var t,a=e.menuItem,n=e.addItemCart,c=e.pricePlus,i=a.title,u=a.url,s=a.price,l=a.category,o=a.id;switch(l){case"salads":t="bi bi-currency-bitcoin";break;case"pizza":t="bi bi-cursor";break;case"meat":t="bi bi-dice-5-fill";break;default:return""}var m=r.a.createElement("i",{className:t});return r.a.createElement("li",{className:"menu__item"},r.a.createElement(p.b,{to:"/main-page/".concat(o)},r.a.createElement("div",{className:"menu__title"},i),r.a.createElement("img",{className:"menu__img",src:u,alt:i}),r.a.createElement("div",{className:"menu__category"},"Category: ",r.a.createElement("span",null,m,l)),r.a.createElement("div",{className:"menu__price"},"Price: ",r.a.createElement("span",null,s))),r.a.createElement("button",{onClick:function(){n(),c()},className:"menu__btn"},"Add to cart"),r.a.createElement("span",{className:"menu__category_Img"}))},f=a(7),E=r.a.createContext(),b=function(){return function(e){return function(t){return r.a.createElement(E.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,{RestoService:a}))})}}},_=function(e){return{type:"MENU_LOADED",payload:e}},v=function(){return{type:"MENU_REQUESTED"}},h=function(){return{type:"MENU_ERROR"}},O=function(e){return{type:"ADD_MENU_CART",payload:e}},j=function(){return{type:"TOTAL_PRICE"}},N=function(){return r.a.createElement("div",{className:"spinner"},"loading...")},y=function(){return r.a.createElement("div",{className:"error"},"Error")},g=(a(43),function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.menuRequested();var e=this.props,t=e.RestoService,a=e.menuLoaded,n=e.errorBoun;t.getMenuItems().then(function(e){return a(e)}).catch(function(){return n()})}},{key:"render",value:function(){var e=this.props,t=e.menuItems,a=e.loaded,n=e.addItemCart,c=e.pricePlus;if(e.error)return r.a.createElement(y,null);if(a)return r.a.createElement(N,null);var i=t.map(function(e){return r.a.createElement(d,{key:e.id,menuItem:e,pricePlus:function(){return c()},addItemCart:function(){return n(e.id)}})});return r.a.createElement(C,{items:i})}}]),t}(n.Component)),C=function(e){var t=e.items;return r.a.createElement("ul",{className:"menu__list"},t)},I={menuLoaded:_,menuRequested:v,errorBoun:h,addItemCart:O,pricePlus:j},k=b()(Object(f.b)(function(e){return{menuItems:e.menu,loaded:e.loaded,error:e.error}},I)(g)),R=function(){return r.a.createElement(k,null)},M=(a(44),{removeItemCart:function(e){return{type:"REMOVE_MENU_CART",payload:e}},addItemCart:O,minesItem:function(e){return{type:"MINES_ITEM",payload:e}},pricePlus:j}),x=Object(f.b)(function(e){return{items:e.items}},M)(function(e){var t=e.items,a=e.removeItemCart,n=e.addItemCart,c=e.minesItem,i=e.pricePlus;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cart__title"},"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437:"),r.a.createElement("div",{className:"cart__list"},t.map(function(e){var t=e.title,u=e.url,s=e.price,l=e.id,o=e.itemCart,m=e.priceFull;return r.a.createElement("div",{key:l,className:"cart__item"},r.a.createElement("img",{src:u,className:"cart__item-img",alt:t}),r.a.createElement("div",{className:"cart__item-title"},t),r.a.createElement("div",{className:"cart__item-price"},s,"$"),r.a.createElement("div",{className:"cart__item-col"},r.a.createElement("input",{className:"cart__item-col-plus",value:"+",type:"button",onClick:function(){n(l),i()}}),r.a.createElement("p",{className:"cart__item-col-text"},o),r.a.createElement("input",{className:"cart__item-col-mines",value:"-",type:"button",onClick:function(){c(l),i()}})),r.a.createElement("div",{className:"cart__item-col"},"\u0421\u0443\u043c\u043c\u0430: ",m),r.a.createElement("div",{onClick:function(){a(l),i()},className:"cart__close"},"\xd7"))})))}),P=(a(28),function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.RestoService,a=e.items,n=e.defaultItems,c=e.pricePlus;return r.a.createElement("div",{className:"cart"},r.a.createElement(x,null),r.a.createElement("button",{className:"cart__btn",onClick:function(){t.setOrder(a),n(),c()}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))}}]),t}(n.Component)),w={defaultItems:function(){return{type:"ITEMS_NULL"}},pricePlus:j},T=b()(Object(f.b)(function(e){return{items:e.items}},w)(P)),U=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(0===this.props.menuItems.length){this.props.menuRequested();var t=this.props,a=t.RestoService,n=t.errorBoun;a.getMenuItems().then(function(t){return e.props.menuLoaded(t)}).catch(function(){return n()})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.loaded,n=t.addItemCart,c=(t.error,t.pricePlus),i=this.props.menuItems.find(function(t){return+t.id===+e.props.match.params.id}),u=i.title,s=i.url,l=i.category,o=i.price,m=i.id;return a?r.a.createElement("div",{className:"item_page"},r.a.createElement(N,null)):r.a.createElement("div",{className:"item_page"},r.a.createElement("div",{className:"menu__item item_block"},r.a.createElement("div",{className:"menu__title"},u),r.a.createElement("img",{className:"menu__img",src:s,alt:u}),r.a.createElement("div",{className:"menu__category"},"Category: ",r.a.createElement("span",null,l)),r.a.createElement("div",{className:"menu__price"},"Price: ",r.a.createElement("span",null,o,"$")),r.a.createElement("button",{onClick:function(){n(m),c()},className:"menu__btn"},"Add to cart"),r.a.createElement("span",{className:"menu__category_Img ".concat(l)})))}}]),t}(n.Component),A={menuLoaded:_,menuRequested:v,errorBoun:h,addItemCart:O,pricePlus:j},D=b()(Object(f.b)(function(e){return{menuItems:e.menu,loaded:e.loaded,error:e.error}},A)(U)),S=a(29),L=a.n(S),B=(a(45),function(e){var t=e.total;return r.a.createElement("header",{className:"header"},r.a.createElement(p.b,{className:"header__link",to:"/main-page/"},"Menu"),r.a.createElement(p.b,{className:"header__link",to:"/cart-page/"},r.a.createElement("img",{className:"header__cart",src:L.a,alt:"cart"}),"Total: ",t," $"))}),F=a(30),q=a.n(F),J=a(2),$=Object(f.b)(function(e){return{totalPrice:e.totalPrice}})(function(e){var t=e.totalPrice;return r.a.createElement("div",{style:{background:"url(".concat(q.a,") center center/cover no-repeat")},className:"app"},r.a.createElement(B,{total:t}),r.a.createElement(J.c,null,r.a.createElement(J.a,{path:"/",exact:!0,component:R}),r.a.createElement(J.a,{path:"/main-page/",exact:!0,component:R}),r.a.createElement(J.a,{path:"/cart-page/",exact:!0,component:T}),r.a.createElement(J.a,{path:"/main-page/:id",component:D})))}),z=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).state={error:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidCatch",value:function(){this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?r.a.createElement(y,null):this.props.children}}]),t}(n.Component),Q=a(16),V=a.n(Q),G=a(21),H=function(){function e(){Object(u.a)(this,e),this._apiBase="http://localhost:3000"}return Object(s.a)(e,[{key:"getResourse",value:function(){var e=Object(G.a)(V.a.mark(function e(t){var a;return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._apiBase).concat(t));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(t)+", received ".concat(a.status));case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getMenuItems",value:function(){var e=Object(G.a)(V.a.mark(function e(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getResourse("/menu/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setOrder",value:function(){var e=Object(G.a)(V.a.mark(function e(t){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,fetch("".concat(this._apiBase,"/order"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 4:if(e.sent.ok){e.next=7;break}throw new Error("json error");case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),K=a(31),W=a(9),X=a(3),Y={menu:[],loaded:!0,error:!1,items:[],totalPrice:0},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MENU_LOADED":return Object(X.a)({},e,{menu:t.payload,loaded:!1});case"MENU_REQUESTED":return Object(X.a)({},e,{loaded:!0});case"MENU_ERROR":return Object(X.a)({},e,{error:!0});case"ADD_MENU_CART":var a=t.payload,n=e.items.findIndex(function(e){return e.id===a});if(n>=0){var r=e.items.find(function(e){return e.id===a}),c=Object(X.a)({},r,{itemCart:++r.itemCart,priceFull:r.price*r.itemCart});return Object(X.a)({},e,{items:[].concat(Object(W.a)(e.items.slice(0,n)),[c],Object(W.a)(e.items.slice(n+1)))})}var i=e.menu.find(function(e){return e.id===a}),u={title:i.title,url:i.url,price:i.price,id:i.id,itemCart:1,priceFull:i.price};return Object(X.a)({},e,{items:[].concat(Object(W.a)(e.items),[u])});case"REMOVE_MENU_CART":var s=t.payload,l=e.items.findIndex(function(e){return e.id===s});return Object(X.a)({},e,{items:[].concat(Object(W.a)(e.items.slice(0,l)),Object(W.a)(e.items.slice(l+1)))});case"ITEMS_NULL":return Object(X.a)({},e,{items:[]});case"MINES_ITEM":var o=t.payload,m=e.items.findIndex(function(e){return e.id===o});if(m>=0){var p=e.items.find(function(e){return e.id===o}),d=Object(X.a)({},p,{itemCart:--p.itemCart,priceFull:p.price*p.itemCart});if(d.itemCart<=1){var f=e.items.find(function(e){return e.id===o}),E=Object(X.a)({},f,{itemCart:1,priceFull:f.price});return Object(X.a)({},e,{items:[].concat(Object(W.a)(e.items.slice(0,m)),[E],Object(W.a)(e.items.slice(m+1)))})}return Object(X.a)({},e,{items:[].concat(Object(W.a)(e.items.slice(0,m)),[d],Object(W.a)(e.items.slice(m+1)))})}var b=e.menu.find(function(e){return e.id===o}),_={title:b.title,url:b.url,price:b.price,id:b.id,itemCart:1,priceFull:b.price};return Object(X.a)({},e,{items:[].concat(Object(W.a)(e.items),[_])});case"TOTAL_PRICE":var v=e.items.reduce(function(e,t){return e+t.priceFull},0);return Object(X.a)({},e,{totalPrice:v});default:return e}},ee=Object(K.a)(Z),te=(a(48),new H);i.a.render(r.a.createElement(f.a,{store:ee},r.a.createElement(z,null,r.a.createElement(E.Provider,{value:te},r.a.createElement(p.a,null,r.a.createElement($,null))))),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.441025d6.chunk.js.map